CREATE TABLE s311288.Position(ID_Position serial PRIMARY KEY, Salary integer, Title varchar(20));
CREATE TABLE s311288.Employee(ID_Employee serial PRIMARY KEY, Name varchar(240) NOT NULL, Surname varchar(24) NOT NULL, ID_Position REFERENCES s311288.Position NOT NULL);
CREATE TABLE s311288.Documents(ID_Document serial PRIMARY KEY, Type varchar(20), Date timestamp NOT NULL DEFAULT NOW());
CREATE TABLE s311288.Document_participants(ID_Employee integer REFERENCES s311288.Employee NOT NULL, ID_Document integer REFERENCES s311288.Documents NOT NULL);
CREATE TABLE s311288.Laboratory(ID_laboratory serial PRIMARY KEY, Location varchar(20), Building_state varchar(20));
CREATE TABLE s311288.Employee_in_lab(ID_Employee integer REFERENCES s311288.Employee NOT NULL, ID_Laboratory integer REFERENCES s311288.Laboratory NOT NULL);
CREATE TABLE s311288.Expedition(ID_Expedition serial PRIMARY KEY, Termination_date date, Commencement_date date DEFAULT NOW(), Position varchar(20) NOT NULL, Status varchar(20) NOT NULL, Territory varchar(20) NOT NULL);
CREATE TABLE s311288.Expedition_crew(ID_Employee integer REFERENCES s311288.Employee NOT NULL, ID_Expedition integer REFERENCES s311288.Expedition NOT NULL, Leader_ID integer);
CREATE TABLE s311288.Equipment(ID_Equipment serial PRIMARY KEY, Name varchar(20) NOT NULL, Cost integer CHECK(Cost > 0), ID_laboratory integer REFERENCES s311288.Laboratory NOT NULL, ID_Expedition integer REFERENCES s311288.Expedition NOT NULL);
CREATE TABLE s311288.Equipment_movement(ID_Movement serial PRIMARY KEY, ID_Equipment integer REFERENCES s311288.Equipment, Start_point varchar(20), End_point varchar(20), Start_time timestamp DEFAULT NOW(), End_time timestamp, CONSTRAINT dtck CHECK(End_time > Start_time));
CREATE TABLE s311288.Sample(ID_Sample serial PRIMARY KEY, Name varchar(20), Weight integer CHECK(Weight > 0), Detection_timestamp timestamp DEFAULT NOW(), ID_Expedition integer REFERENCES s311288.Expedition);
CREATE TABLE s311288.Research_crew(ID_Employee integer REFERENCES s311288.Employee NOT NULL, ID_Sample integer REFERENCES s311288.Sample NOT NULL, Instructions varchar(500));
CREATE TABLE s311288.Product(ID_Product serial PRIMARY KEY, Class varchar(50), Version varchar(20), ID_Sample integer REFERENCES s311288.Sample NOT NULL);
CREATE TABLE s311288.Testing(ID_Product integer REFERENCES s311288.Product NOT NULL, ID_Employee integer REFERENCES s311288.Employee NOT NULL, Result varchar(100));
CREATE TABLE s311288.Accident(ID_Accident serial PRIMARY KEY, ID_Product integer REFERENCES s311288.Product NOT NULL, Territory varchar(100), Accident_date date NOT NULL, News_release_date date, Estimated_damage integer CHECK(Estimated_damage > 0), Victims integer, Status varchar(100), CONSTRAINT dtck CHECK(News_release_date > Accident_date));
CREATE TABLE s311288.Spec_ops(ID_Employee integer REFERENCES s311288.Employee NOT NULL, ID_Accident integer REFERENCES s311288.Accident NOT NULL, Instructions varchar(500));
